
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="//code.jquery.com/ui/1.11.1/themes/redmond/jquery-ui.css">
    <script src="//code.jquery.com/jquery-1.10.2.js"></script>
    <script src="//code.jquery.com/ui/1.11.2/jquery-ui.js"></script>
    <script src="//cdn.socket.io/socket.io-1.2.0.js"></script>
    <link rel="stylesheet" href="css/main-style.css">

    <script src="js/display.js"></script>
    <% if (user.USERTYPE <= 1) { %>
    <script src="js/jquery.contextMenu.js"></script>
    <script src="js/jquery.ui.position.js"></script>
    <link rel="stylesheet" href="css/jquery.contextMenu.css">
    <script src="js/edit.js"></script>

    <% } %>
    <title>CLASH- <%= user.USERNAME %></title>

</head>

<body>
<div id="main-tabs" style="height:95%">
    <ul id="tabHeader">
        <li><a href="#read-tab">Read</a></li>
        <li><a href="#statistic-tab">Statistic</a></li>
        <li><a href="#upload-tab">Upload</a></li>
        <li><a href="#management-tab">Management</a></li>
    </ul>


    <div id="read-tab" class="tab-content">

            <div id ='content' class="printable" style ="font-size:30px">
                This is a test
            </div>
            <div id="nav-wrapper">
                <div id="nav">
                    <img src="images/ClashLogo.png" alt="CLASH" style="width:150px;height:113px">
                    <br />
                    <select>
                        <option>Document1</option>
                        <option>Document2</option>
                        <option>Document3</option>
                    </select>
                    <br />
                    <br />

                    <button type="button" id="read" onclick="startReader()">Start Read</button> <br />
                    <input type="checkbox" id="edit" onclick="addClick(this.checked)">           <span>Edit Mode</span><br />
                    <input type="checkbox" id="Slash" onclick="hideSlash(this.checked)" />			<span>S/l/a/s/h</span><br />
                    <input type="checkbox" id="Exception" onclick="boldException(this.checked)" />				<span style="font-weight:bold">Exception</span><br />
                    <input type="checkbox" id="vocab" onclick="showVocab(this.checked)">           <span style="font-style:italic">Vocabulary</span><br />
                    <input type="checkbox" id="stress" onclick="showStress(this.checked)">           <span style="font-weight: bold">Stress</span><br />
                    <input type="checkbox" id="postrigger" onclick="enablePOS(this.checked);" /> <span>Parts-of-speech</span><br />
                    <div id="pos">
                        <input type="checkbox" id="All" onclick="toggleAllPOS(this.checked);" />  <span class='All'>All</span><br />
                        <input type="checkbox" id="Noun" onclick="changeColor(this)" />            <span class='Noun'>Noun</span><br />
                        <input type="checkbox" id="Pronoun" onclick="changeColor(this)" />        <span class='Pronoun'>Pronoun</span><br />
                        <input type="checkbox" id="Verb" onclick="changeColor(this)" />           <span class='Verb'>Verb</span><br />
                        <input type="checkbox" id="Adverb" onclick="changeColor(this)" />         <span class='Adverb'>Adverb</span><br />
                        <input type="checkbox" id="Adjective" onclick="changeColor(this)" />      <span class='Adjective'>Adjective</span><br />
                        <input type="checkbox" id="Conjunction" onclick="changeColor(this)" />   <span class='Conjunction'>Conjunction</span><br />
                        <input type="checkbox" id="Preposition" onclick="changeColor(this)" />   <span class='Preposition'>Preposition</span><br />
                        <input type="checkbox" id="Article" onclick="changeColor(this)" />        <span class='Article'>Article</span><br />
                    </div>
                </div>
            </div>


    </div>
    <div id="statistic-tab" class="tab-content">
            statistic information
    </div>
    <div id="upload-tab" class="tab-content">
            <div id="section">
                <h2>Insert Text Below</h2>
                <br />
                    <input type="text" name="filename" value="" placeholder="File Name" />
                <br />
                <br />

                <div id="enter">
                    <textarea id="resizable" cols="30" rows="10"
                              wrap="physical" name="text" maxlength="30000" placeholder="Enter text to CLASH"></textarea>
                    <div for="resizable" id="characterLeft"></div>
                    <button type="button" id="button">CLASH IT!</button>
                    <br /> <br />
                    <input type="file" val="select a file" id="select" accept=".doc,.docx" /><br /><br />
                    <button type="button" id="upload">Upload</button>
                </div>
        </div>


    </div>
    <div id="management-tab" class="tab-content">
            <div id="manageTabs" style="height:85%">
                <ul id="nest-tabHeader">
                    <li><a href="#class-tab">Class</a></li>
                    <li><a href="#student-tab">Student</a></li>
                    <li><a href="#file-tab">File</a></li>
                    <li><a href="#exception-tab">Exception</a></li>
                    <li><a href="#user-tab">User</a></li>
                </ul>
                <div id="class-tab" class="tab-content">

                </div>
                <div id="student-tab" class="tab-content">

                </div>
                <div id="file-tab" class="tab-content">

                </div>
                <div id="exception-tab" class="tab-content">

                </div>
                <div id="user-tab" class="tab-content" style="overflow-y: scroll;height:80%;">
                    <div class="left">
                        <h1>User Creation</h1>
                        <form id="addUser">
                            <input type="text" name="username" value="" placeholder="Username">
                            <br />
                            <input type="password" id='addUserPassword' name="password" value="" placeholder="Password">
                            <br />
                            <input type="checkbox" onchange="document.getElementById('addUserPassword').type =
                                this.checked ? 'text' : 'password'"> Show password
                            <br />
                            <select>
                                <% if(user.USERTYPE==0) {%>
                                <option value="0">Admin</option>
                                <option value="1">Instructor</option>
                                <%}%>
                                <option value="2" selected="selected">Student</option>
                            </select>
                            <br>
                            <input type="submit" value="Create Account">
                        </form>
                    </div>
                    <div class="right">
                        <div class="container">
                            <div>
                                <select id="leftValues" size="10" multiple>
                                    <option>Document 1</option>
                                    <option>Document 2</option>
                                    <option>Document 3</option>
                                    <option>Document 4</option>
                                    <option>Document 5</option>
                                    <option>Document 6</option>
                                    <option>Document 7</option>
                                    <option>Document 8</option>
                                    <option>Document 9</option>
                                    <option>Document 10</option>
                                </select>
                            </div>
                            <div>
                                <br /><br /><br />
                                <input type="button" id="btnRight" value="&gt;&gt;" />
                                <br />
                                <input type="button" id="btnLeft" value="&lt;&lt;" />
                            </div>
                            <div>
                                <select id="rightValues" size="20" multiple>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

    </div>
</div>
<script>
    $(function() {
        $( "#main-tabs" ).tabs();
        $( "#manageTabs" ).tabs();
        $("button").button();
    });
    var socket = io.connect('http://esl-clash.cs.odu.edu',{ path: '/socket.io' });
    $('#button').click(function(){
        console.log('trying to emit...');
        socket.emit('text', $('#resizable').val());
        console.log($('#resizable').val());
        //$('#resizable').val('');
        socket.on('response', function(msg){
            console.log('response recieved ' + msg);
            json = JSON.parse(msg);
            var str =parseJSON(json);
            document.getElementById("content").innerHTML = str;
            hideSlash();
            if($('#edit')[0]['checked']!=true){
                $('#edit').trigger('click');
            }
            $( "#main-tabs" ).tabs( "option", "active", 0 );
        });


    });


    //delete script
    $(function(){
        $("#btnLeft").click(function () {
            var selectedItem = $("#rightValues option:selected");
            $("#leftValues").append(selectedItem);
            console.log($('#file'));
        });

        $("#btnRight").click(function () {
            var selectedItem = $("#leftValues option:selected");
            $("#rightValues").append(selectedItem);
            console.log($('#file'));
        });

        $("#rightValues").change(function () {
            var selectedItem = $("#rightValues option:selected");
            $("#txtRight").val(selectedItem.text());

            console.log($('#file'));
        });
    });


    // Add events
    $('input[type=file]').on('change', prepareUpload);

    // Grab the files and set them to our variable
    function prepareUpload(event)
    {
        files = event.target.files;
        console.log(event);
        console.log(files);
    }
    $('form').on('submit', uploadFiles);

    // Catch the form submit and upload the files
    function uploadFiles(event)
    {
        event.stopPropagation(); // Stop stuff happening
        event.preventDefault(); // Totally stop stuff happening
        console.log(event);
        // START A LOADING SPINNER HERE

        // Create a formdata object and add the files
        var data = new FormData();
        console.log(data);
        $.each(files, function(key, value)
        {
            data.append(key, value);
        });
        console.log(data);
    }
</script>
</body>
</html>
